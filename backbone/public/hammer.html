<!DOCTYPE html>
<html>
    <head>
        <title>Karopapier 2.1</title>
        <script type="text/javascript" src="js/libs/jquery-1.11.0.min.js"></script>
        <script type="text/javascript" src="js/libs/jquery-ui-1.10.4.custom.min.js"></script>
        <script type="text/javascript" src="js/libs/underscore-min.js"></script>
        <script type="text/javascript" src="js/libs/jquery.mousewheel.min.js"></script>
        <script type="text/javascript" src="js/libs/hammer.min.js"></script>
        <script type="text/javascript" src="js/libs/jquery.panzoom.min.js"></script>

        <link id="favicon" rel="shortcut icon" href="favicon.ico"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/>
        <meta charset="utf-8"/>
		<style>
			#pomacolo { background-color: #ffffff}

			html { height:100%; }
			body { position:absolute; top:0; bottom:0; right:0; left:0;padding:0;margin:0 }
		</style>
    </head>
    <body>
		<div id="container" style="width: 100%;height:100%">
		Bla
		<div id="map">
			<img src="http://2.karopapier.de/maps/107.svg">
		</div>
        <div id="menu"
             style="background-color: red; position: fixed; display: none; height: 200px; width: 200px; top:0; overflow: auto">
            <ul>
                <li>A</li>
                <li>A</li>
                <li>A</li>
                <li>A</li>
                <li>A</li>
            </ul>
        </div>
        <div id="sidebar"
             style="background-color: yellow; position: fixed; display: none; height: 400px; width: 200px; top:0; overflow: auto">
            Very<br> long<br> text<br> Very<br> long<br> text<br> Very<br> long<br> text<br> Very<br> long<br> text<br>
            Very<br>
            long<br> text<br> Very<br> long<br> text<br> Very<br> long<br> text<br> Very<br> long<br> text<br> Very<br>
            long<br>
            text<br> Very<br> long<br> text<br> Very<br> long<br> text<br> Very<br> long<br> text<br>
            Very<br> long<br> text<br> Very<br> long<br> text<br>
        </div>

        <script type="text/javascript" src="js/libs/Sideslide.js"></script>
        <script type="text/javascript">

            $(document).ready(function () {
                var rightSlide = new Sideslide(document.getElementById('sidebar'));
                var menuSlide = new Sideslide(document.getElementById('menu'), {
                    side: "left"
                });

				var $panzoom = $("#map").panzoom();
				$panzoom.parent().on('mousewheel.focal', function( e ) {
					e.preventDefault();
					var delta = e.delta || e.originalEvent.wheelDelta;
					var zoomOut = delta ? delta < 0 : e.originalEvent.deltaY > 0;
					console.log(zoomOut);
					$panzoom.panzoom('zoom', zoomOut, {
						increment: 0.1,
						animate: false,
						focal: e
					});
				});
				$('#map').on("dblclick", function(e) {
					console.log("Clicked");
					e.preventDefault();
					//console.log($panzoom);
					//$('#map').panzoom("zoomIn");
					//console.log($('#map').panzoom("zoom"));
					$('#map').panzoom("zoom", false, { focal: e });
				});
				//$('#map').on("panzoompan", function(e, panzoom, x, y) {
					//console.log(x,y);
				//});
            })
        </script>
        <!-- <script type="text/javascript" src="js/libs/pomacolo.min.js"></script> -->
    </body>
</html>
