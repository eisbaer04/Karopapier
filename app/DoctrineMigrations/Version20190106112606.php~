<?php

namespace Application\Migrations;

use Doctrine\DBAL\Migrations\AbstractMigration;
use Doctrine\DBAL\Schema\Schema;

/**
 * Auto-generated Migration: Please modify to your needs!
 */
class Version20190106112606 extends AbstractMigration
{
    /**
     * @param Schema $schema
     */
    public function up(Schema $schema)
    {
        // this up() migration is auto-generated, please modify it to your needs
        $this->abortIf($this->connection->getDatabasePlatform()->getName() !== 'mysql', 'Migration can only be executed safely on \'mysql\'.');

        $this->addSql('CREATE TABLE karo_karolenderblatt (id INT AUTO_INCREMENT NOT NULL, day_string VARCHAR(5) NOT NULL, event_date DATE NOT NULL, posted_date DATE NOT NULL, line LONGTEXT NOT NULL, INDEX IDX_699B5D5439605974 (day_string), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB');
        $this->addSql('DROP TABLE karo_admin');
        $this->addSql('DROP TABLE karo_cachehit');
        $this->addSql('DROP TABLE karo_chat_prepared');
        $this->addSql('DROP TABLE karo_counter');
        $this->addSql('DROP TABLE karo_featureranks');
        $this->addSql('DROP TABLE karo_features');
        $this->addSql('DROP TABLE karo_foren');
        $this->addSql('DROP TABLE karo_forum');
        $this->addSql('DROP TABLE karo_gamescount');
        $this->addSql('DROP TABLE karo_livelog');
        $this->addSql('DROP TABLE karo_pollchoices');
        $this->addSql('DROP TABLE karo_polloptions');
        $this->addSql('DROP TABLE karo_polls');
        $this->addSql('DROP TABLE karo_relations');
        $this->addSql('DROP TABLE karo_reminder');
        $this->addSql('DROP TABLE karo_rights');
        $this->addSql('ALTER TABLE karo_maps DROP author_id, DROP locked, CHANGE Name Name VARCHAR(255) NOT NULL, CHANGE Author Author VARCHAR(255) NOT NULL, CHANGE Night Night INT NOT NULL, CHANGE Record Record INT NOT NULL, CHANGE Starties Starties INT NOT NULL, CHANGE nb_cps nb_cps INT NOT NULL, CHANGE cps_list cps_list VARCHAR(50) NOT NULL, CHANGE cps_rec cps_rec INT NOT NULL, CHANGE Active Active INT NOT NULL, CHANGE rating rating DOUBLE PRECISION NOT NULL');
        $this->addSql('ALTER TABLE karo_user CHANGE U_ID U_ID INT AUTO_INCREMENT NOT NULL, CHANGE Vorname Vorname VARCHAR(255) DEFAULT NULL, CHANGE Nachname Nachname VARCHAR(255) DEFAULT NULL, CHANGE Email Email VARCHAR(50) NOT NULL, CHANGE Homepage Homepage VARCHAR(60) NOT NULL, CHANGE ICQ ICQ VARCHAR(255) DEFAULT NULL, CHANGE AIM AIM VARCHAR(255) DEFAULT NULL, CHANGE MSN MSN VARCHAR(255) DEFAULT NULL, CHANGE Jabber Jabber VARCHAR(255) DEFAULT NULL, CHANGE twitter twitter VARCHAR(255) DEFAULT NULL, CHANGE xing xing VARCHAR(255) DEFAULT NULL, CHANGE linkedin linkedin VARCHAR(255) DEFAULT NULL, CHANGE facebook facebook VARCHAR(255) DEFAULT NULL, CHANGE myspace myspace VARCHAR(255) DEFAULT NULL, CHANGE Picture Picture VARCHAR(255) NOT NULL, CHANGE short_info short_info VARCHAR(255) DEFAULT NULL, CHANGE reallastvisit reallastvisit DATETIME DEFAULT NULL, CHANGE currentvisit currentvisit DATETIME DEFAULT NULL, CHANGE chatvisit chatvisit DATETIME DEFAULT NULL, CHANGE lastmailsent lastmailsent DATETIME DEFAULT NULL, CHANGE Browser Browser VARCHAR(255) DEFAULT NULL, CHANGE Color Color VARCHAR(6) NOT NULL, CHANGE Size Size INT NOT NULL, CHANGE Border Border INT NOT NULL, CHANGE View View INT NOT NULL, CHANGE draw_limit draw_limit INT NOT NULL, CHANGE GamesPerPage GamesPerPage INT NOT NULL, CHANGE games_order games_order VARCHAR(255) NOT NULL, CHANGE theme theme VARCHAR(50) NOT NULL, CHANGE Active Active TINYINT(1) NOT NULL, CHANGE Invited Invited INT DEFAULT NULL, CHANGE invited2 invited2 INT DEFAULT NULL, CHANGE Sendmail Sendmail TINYINT(1) NOT NULL, CHANGE Tag Tag TINYINT(1) NOT NULL, CHANGE Nacht Nacht TINYINT(1) NOT NULL, CHANGE Maxgames Maxgames INT NOT NULL, CHANGE Signupdate Signupdate DATETIME NOT NULL, CHANGE Session Session VARCHAR(255) NOT NULL, CHANGE Warned Warned TINYINT(1) NOT NULL, CHANGE automoves automoves INT NOT NULL, CHANGE maillock maillock DATETIME DEFAULT NULL, CHANGE isbot isbot TINYINT(1) NOT NULL, CHANGE Birthday Birthday DATE DEFAULT NULL, CHANGE gelesen gelesen INT NOT NULL, CHANGE faulpelz faulpelz INT NOT NULL, CHANGE move_autoforward move_autoforward SMALLINT NOT NULL, CHANGE economode economode TINYINT(1) NOT NULL, CHANGE geoLat geoLat VARCHAR(30) DEFAULT NULL, CHANGE geoLng geoLng VARCHAR(30) DEFAULT NULL, CHANGE activeJS activeJS TINYINT(1) NOT NULL, CHANGE activeCanvas activeCanvas TINYINT(1) NOT NULL, CHANGE status_code status_code TINYINT(1) NOT NULL, CHANGE status_text status_text VARCHAR(255) NOT NULL, CHANGE status_date status_date DATE DEFAULT NULL, CHANGE nb_dran nb_dran INT DEFAULT NULL, CHANGE nb_games nb_games INT DEFAULT NULL, CHANGE max_wollust max_wollust INT NOT NULL, CHANGE use_bart use_bart INT DEFAULT NULL, CHANGE use_sound use_sound INT NOT NULL, CHANGE notification_sound notification_sound VARCHAR(50) NOT NULL, CHANGE distance distance INT NOT NULL');
        $this->addSql('ALTER TABLE karo_user ADD CONSTRAINT FK_B0BF86304F10D637 FOREIGN KEY (Invited) REFERENCES karo_user (U_ID)');
        $this->addSql('CREATE UNIQUE INDEX UNIQ_B0BF86304F10D637 ON karo_user (Invited)');
        $this->addSql('ALTER TABLE karo_games DROP UM_ID, CHANGE G_ID G_ID INT AUTO_INCREMENT NOT NULL, CHANGE U_ID U_ID INT DEFAULT NULL, CHANGE M_ID M_ID INT NOT NULL, CHANGE mailsent mailsent TINYINT(1) NOT NULL, CHANGE datemailsent datemailsent DATETIME NOT NULL, CHANGE comment comment TEXT DEFAULT NULL, CHANGE started started TINYINT(1) NOT NULL, CHANGE starteddate starteddate DATETIME NOT NULL, CHANGE startedby startedby INT DEFAULT NULL, CHANGE finished finished TINYINT(1) NOT NULL, CHANGE finisheddate finisheddate DATETIME NOT NULL, CHANGE zzz zzz INT NOT NULL, CHANGE checkpoints checkpoints INT NOT NULL, CHANGE crashallowed crashallowed INT NOT NULL, CHANGE startdirection startdirection INT NOT NULL, CHANGE is_archived is_archived TINYINT(1) NOT NULL');
        $this->addSql('ALTER TABLE karo_games ADD CONSTRAINT FK_D6C7CEF9EA7D38C4 FOREIGN KEY (U_ID) REFERENCES karo_user (U_ID)');
        $this->addSql('ALTER TABLE karo_games ADD CONSTRAINT FK_D6C7CEF97FD047B4 FOREIGN KEY (M_ID) REFERENCES karo_maps (M_ID)');
        $this->addSql('ALTER TABLE karo_games ADD CONSTRAINT FK_D6C7CEF95D707D30 FOREIGN KEY (startedby) REFERENCES karo_user (U_ID)');
        $this->addSql('CREATE UNIQUE INDEX UNIQ_D6C7CEF9EA7D38C4 ON karo_games (U_ID)');
        $this->addSql('CREATE UNIQUE INDEX UNIQ_D6C7CEF97FD047B4 ON karo_games (M_ID)');
        $this->addSql('CREATE UNIQUE INDEX UNIQ_D6C7CEF95D707D30 ON karo_games (startedby)');
        $this->addSql('ALTER TABLE karo_user_map CHANGE author_id author_id INT DEFAULT NULL, CHANGE rating rating DOUBLE PRECISION NOT NULL, CHANGE starties Starties INT NOT NULL');
        $this->addSql('ALTER TABLE karo_user_map ADD CONSTRAINT FK_63692D29F675F31B FOREIGN KEY (author_id) REFERENCES karo_user (U_ID)');
        $this->addSql('CREATE INDEX IDX_63692D29F675F31B ON karo_user_map (author_id)');
        $this->addSql('ALTER TABLE karo_chat CHANGE id id INT AUTO_INCREMENT NOT NULL');
        $this->addSql('ALTER TABLE karo_teilnehmer CHANGE G_ID G_ID INT NOT NULL, CHANGE U_ID U_ID INT NOT NULL, CHANGE status status INT NOT NULL, CHANGE moved moved TINYINT(1) NOT NULL, CHANGE finished finished INT NOT NULL');
        $this->addSql('ALTER TABLE karo_teilnehmer ADD CONSTRAINT FK_20377F83106DA7D0 FOREIGN KEY (G_ID) REFERENCES karo_games (G_ID)');
        $this->addSql('ALTER TABLE karo_teilnehmer ADD CONSTRAINT FK_20377F83EA7D38C4 FOREIGN KEY (U_ID) REFERENCES karo_user (U_ID)');
        $this->addSql('CREATE INDEX IDX_20377F83106DA7D0 ON karo_teilnehmer (G_ID)');
        $this->addSql('ALTER TABLE karo_mapvotes ADD CONSTRAINT FK_84544B58EA7D38C4 FOREIGN KEY (U_ID) REFERENCES karo_user (U_ID)');
        $this->addSql('ALTER TABLE karo_mapvotes ADD CONSTRAINT FK_84544B587FD047B4 FOREIGN KEY (M_ID) REFERENCES karo_maps (M_ID)');
        $this->addSql('CREATE INDEX IDX_84544B58EA7D38C4 ON karo_mapvotes (U_ID)');
        $this->addSql('CREATE INDEX IDX_84544B587FD047B4 ON karo_mapvotes (M_ID)');
        $this->addSql('ALTER TABLE karo_message CHANGE id id INT AUTO_INCREMENT NOT NULL, CHANGE user_id user_id INT NOT NULL, CHANGE contact_id contact_id INT NOT NULL, CHANGE rxtx rxtx VARCHAR(2) NOT NULL, CHANGE is_deleted is_deleted TINYINT(1) NOT NULL');
        $this->addSql('ALTER TABLE karo_moves CHANGE M_ID M_ID INT AUTO_INCREMENT NOT NULL, CHANGE G_ID G_ID INT DEFAULT NULL, CHANGE U_ID U_ID INT DEFAULT NULL, CHANGE date date DATETIME NOT NULL, CHANGE x_pos x_pos SMALLINT NOT NULL, CHANGE y_pos y_pos SMALLINT NOT NULL, CHANGE x_vec x_vec SMALLINT NOT NULL, CHANGE y_vec y_vec SMALLINT NOT NULL, CHANGE crash crash TINYINT(1) NOT NULL, CHANGE movemessage movemessage VARCHAR(255) NOT NULL');
        $this->addSql('ALTER TABLE karo_moves ADD CONSTRAINT FK_6CDBEDFA106DA7D0 FOREIGN KEY (G_ID) REFERENCES karo_games (G_ID)');
        $this->addSql('ALTER TABLE karo_moves ADD CONSTRAINT FK_6CDBEDFAEA7D38C4 FOREIGN KEY (U_ID) REFERENCES karo_user (U_ID)');
        $this->addSql('ALTER TABLE karo_moves ADD CONSTRAINT FK_6CDBEDFA106DA7D0EA7D38C4 FOREIGN KEY (G_ID, U_ID) REFERENCES karo_teilnehmer (G_ID, U_ID)');
        $this->addSql('CREATE UNIQUE INDEX UNIQ_6CDBEDFA106DA7D0 ON karo_moves (G_ID)');
        $this->addSql('CREATE UNIQUE INDEX UNIQ_6CDBEDFAEA7D38C4 ON karo_moves (U_ID)');
        $this->addSql('DROP INDEX idx_gid ON karo_checkpoints');
        $this->addSql('ALTER TABLE karo_checkpoints DROP PRIMARY KEY');
        $this->addSql('ALTER TABLE karo_checkpoints CHANGE G_ID G_ID INT DEFAULT NULL, CHANGE U_ID U_ID INT DEFAULT NULL, CHANGE Checkpoint Checkpoint INT NOT NULL');
        $this->addSql('ALTER TABLE karo_checkpoints ADD CONSTRAINT FK_44D62E01106DA7D0EA7D38C4 FOREIGN KEY (G_ID, U_ID) REFERENCES karo_teilnehmer (G_ID, U_ID)');
        $this->addSql('CREATE INDEX IDX_44D62E01106DA7D0EA7D38C4 ON karo_checkpoints (G_ID, U_ID)');
        $this->addSql('ALTER TABLE karo_checkpoints ADD PRIMARY KEY (Checkpoint)');
        $this->addSql('ALTER TABLE karo_visits DROP PRIMARY KEY');
        $this->addSql('ALTER TABLE karo_visits CHANGE visitdate visitdate DATE NOT NULL, CHANGE U_ID U_ID INT NOT NULL');
        $this->addSql('ALTER TABLE karo_visits ADD CONSTRAINT FK_D1DE978DEA7D38C4 FOREIGN KEY (U_ID) REFERENCES karo_user (U_ID)');
        $this->addSql('CREATE INDEX IDX_D1DE978DEA7D38C4 ON karo_visits (U_ID)');
        $this->addSql('ALTER TABLE karo_visits ADD PRIMARY KEY (visitdate, U_ID)');
    }

    /**
     * @param Schema $schema
     */
    public function down(Schema $schema)
    {
        // this down() migration is auto-generated, please modify it to your needs
        $this->abortIf($this->connection->getDatabasePlatform()->getName() !== 'mysql', 'Migration can only be executed safely on \'mysql\'.');

        $this->addSql('CREATE TABLE karo_admin (R_ID INT DEFAULT 0 NOT NULL, U_ID INT DEFAULT 0 NOT NULL, Value TINYINT(1) DEFAULT \'0\' NOT NULL, PRIMARY KEY(R_ID, U_ID)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB');
        $this->addSql('CREATE TABLE karo_cachehit (id TINYINT(1) NOT NULL, Hit BIGINT NOT NULL, Miss BIGINT NOT NULL, Disabled BIGINT NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB');
        $this->addSql('CREATE TABLE karo_chat_prepared (id INT UNSIGNED AUTO_INCREMENT NOT NULL, lineId INT NOT NULL, ts DATETIME DEFAULT NULL, time VARCHAR(10) NOT NULL COLLATE utf8mb4_general_ci, login VARCHAR(50) NOT NULL COLLATE utf8mb4_general_ci, U_ID INT DEFAULT NULL, text TEXT NOT NULL COLLATE utf8mb4_general_ci, line TEXT NOT NULL COLLATE utf8mb4_general_ci, after_ts DATETIME DEFAULT NULL, before_ts DATETIME DEFAULT NULL, UNIQUE INDEX idx_line_before (lineId, before_ts), INDEX idx_lineId (lineId), INDEX idx_line_after (lineId, after_ts), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB');
        $this->addSql('CREATE TABLE karo_counter (ID INT DEFAULT 0 NOT NULL, counter INT DEFAULT 0 NOT NULL, PRIMARY KEY(ID)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB');
        $this->addSql('CREATE TABLE karo_featureranks (F_ID INT DEFAULT 0 NOT NULL, U_ID INT DEFAULT 0 NOT NULL, Rank INT DEFAULT 0 NOT NULL, PRIMARY KEY(F_ID, U_ID)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB');
        $this->addSql('CREATE TABLE karo_features (F_ID INT UNSIGNED AUTO_INCREMENT NOT NULL, Feature VARCHAR(255) DEFAULT \'\' NOT NULL COLLATE latin1_swedish_ci, Description TEXT NOT NULL COLLATE latin1_swedish_ci, Requestor VARCHAR(255) DEFAULT \'\' NOT NULL COLLATE latin1_swedish_ci, Ranking DOUBLE PRECISION DEFAULT \'0\' NOT NULL, Created DATE DEFAULT \'0000-00-00\' NOT NULL, DONE INT DEFAULT 0 NOT NULL, DateDone DATETIME DEFAULT \'0000-00-00 00:00:00\' NOT NULL, PRIMARY KEY(F_ID)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB');
        $this->addSql('CREATE TABLE karo_foren (F_ID INT AUTO_INCREMENT NOT NULL, Name VARCHAR(255) DEFAULT \'\' NOT NULL COLLATE latin1_swedish_ci, Description VARCHAR(255) DEFAULT \'\' NOT NULL COLLATE latin1_swedish_ci, Intern TINYINT(1) DEFAULT \'1\' NOT NULL, UNIQUE INDEX F_ID (F_ID), PRIMARY KEY(F_ID)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB');
        $this->addSql('CREATE TABLE karo_forum (A_ID INT UNSIGNED AUTO_INCREMENT NOT NULL, Subject VARCHAR(80) DEFAULT \'\' NOT NULL COLLATE latin1_swedish_ci, Text TEXT NOT NULL COLLATE latin1_swedish_ci, Author VARCHAR(80) DEFAULT \'\' NOT NULL COLLATE latin1_swedish_ci, creationtime DATETIME DEFAULT \'0000-00-00 00:00:00\' NOT NULL, Thread INT UNSIGNED DEFAULT 0 NOT NULL, Forum TINYINT(1) DEFAULT \'0\' NOT NULL, UNIQUE INDEX A_ID (A_ID), INDEX A_ID_2 (A_ID), PRIMARY KEY(A_ID)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB');
        $this->addSql('CREATE TABLE karo_gamescount (G_ID INT NOT NULL, starteddate DATETIME NOT NULL, finisheddate DATETIME NOT NULL, PRIMARY KEY(G_ID)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB');
        $this->addSql('CREATE TABLE karo_livelog (id INT AUTO_INCREMENT NOT NULL, Message VARCHAR(255) NOT NULL COLLATE latin1_swedish_ci, created_at DATETIME DEFAULT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB');
        $this->addSql('CREATE TABLE karo_pollchoices (P_ID INT DEFAULT 0 NOT NULL, O_ID INT DEFAULT 0 NOT NULL, U_ID INT DEFAULT 0 NOT NULL, PRIMARY KEY(P_ID, O_ID, U_ID)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB');
        $this->addSql('CREATE TABLE karo_polloptions (O_ID INT AUTO_INCREMENT NOT NULL, P_ID INT UNSIGNED DEFAULT 0 NOT NULL, Polloption VARCHAR(255) DEFAULT \'\' NOT NULL COLLATE latin1_swedish_ci, PRIMARY KEY(O_ID)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB');
        $this->addSql('CREATE TABLE karo_polls (P_ID INT UNSIGNED AUTO_INCREMENT NOT NULL, Topic VARCHAR(255) DEFAULT \'\' NOT NULL COLLATE latin1_swedish_ci, Comment TEXT NOT NULL COLLATE latin1_swedish_ci, Question VARCHAR(255) DEFAULT \'\' NOT NULL COLLATE latin1_swedish_ci, Start DATETIME DEFAULT \'0000-00-00 00:00:00\' NOT NULL, End DATETIME DEFAULT \'0000-00-00 00:00:00\' NOT NULL, Multiple INT DEFAULT 0 NOT NULL, Owner INT DEFAULT 0 NOT NULL, Intern INT DEFAULT 0 NOT NULL, Secret INT DEFAULT 0 NOT NULL, Closed INT DEFAULT 0 NOT NULL, PRIMARY KEY(P_ID)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB');
        $this->addSql('CREATE TABLE karo_relations (user1_id INT UNSIGNED NOT NULL, user2_id INT UNSIGNED NOT NULL, relation VARCHAR(20) NOT NULL COLLATE latin1_swedish_ci, PRIMARY KEY(user1_id, user2_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB');
        $this->addSql('CREATE TABLE karo_reminder (R_ID INT AUTO_INCREMENT NOT NULL, U_ID INT NOT NULL, Login VARCHAR(255) NOT NULL COLLATE latin1_swedish_ci, Email VARCHAR(255) NOT NULL COLLATE latin1_swedish_ci, Days INT NOT NULL, Type VARCHAR(255) NOT NULL COLLATE latin1_swedish_ci, Reminder VARCHAR(255) NOT NULL COLLATE latin1_swedish_ci, PRIMARY KEY(R_ID)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB');
        $this->addSql('CREATE TABLE karo_rights (R_ID INT UNSIGNED AUTO_INCREMENT NOT NULL, Permission CHAR(40) DEFAULT \'\' NOT NULL COLLATE latin1_swedish_ci, Description CHAR(40) DEFAULT \'\' NOT NULL COLLATE latin1_swedish_ci, Startpage CHAR(40) DEFAULT \'\' NOT NULL COLLATE latin1_swedish_ci, UNIQUE INDEX R_ID (R_ID), INDEX R_ID_2 (R_ID), PRIMARY KEY(R_ID)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB');
        $this->addSql('DROP TABLE karo_karolenderblatt');
        $this->addSql('ALTER TABLE karo_chat CHANGE id id INT UNSIGNED AUTO_INCREMENT NOT NULL');
        $this->addSql('ALTER TABLE karo_checkpoints DROP FOREIGN KEY FK_44D62E01106DA7D0EA7D38C4');
        $this->addSql('DROP INDEX IDX_44D62E01106DA7D0EA7D38C4 ON karo_checkpoints');
        $this->addSql('ALTER TABLE karo_checkpoints DROP PRIMARY KEY');
        $this->addSql('ALTER TABLE karo_checkpoints CHANGE Checkpoint Checkpoint INT UNSIGNED DEFAULT 0 NOT NULL, CHANGE G_ID G_ID INT UNSIGNED DEFAULT 0 NOT NULL, CHANGE U_ID U_ID INT UNSIGNED DEFAULT 0 NOT NULL');
        $this->addSql('CREATE INDEX idx_gid ON karo_checkpoints (G_ID)');
        $this->addSql('ALTER TABLE karo_checkpoints ADD PRIMARY KEY (G_ID, U_ID, Checkpoint)');
        $this->addSql('ALTER TABLE karo_games DROP FOREIGN KEY FK_D6C7CEF9EA7D38C4');
        $this->addSql('ALTER TABLE karo_games DROP FOREIGN KEY FK_D6C7CEF97FD047B4');
        $this->addSql('ALTER TABLE karo_games DROP FOREIGN KEY FK_D6C7CEF95D707D30');
        $this->addSql('DROP INDEX UNIQ_D6C7CEF9EA7D38C4 ON karo_games');
        $this->addSql('DROP INDEX UNIQ_D6C7CEF97FD047B4 ON karo_games');
        $this->addSql('DROP INDEX UNIQ_D6C7CEF95D707D30 ON karo_games');
        $this->addSql('ALTER TABLE karo_games ADD UM_ID INT UNSIGNED NOT NULL COMMENT \'user map id\', CHANGE startedby startedby INT DEFAULT 0 NOT NULL COMMENT \'Game created by\', CHANGE G_ID G_ID INT UNSIGNED AUTO_INCREMENT NOT NULL, CHANGE mailsent mailsent TINYINT(1) DEFAULT \'0\' NOT NULL COMMENT \'Braucht irgendwie keiner mehr...\', CHANGE datemailsent datemailsent DATETIME DEFAULT \'0000-00-00 00:00:00\' NOT NULL, CHANGE comment comment TEXT DEFAULT NULL COLLATE latin1_swedish_ci COMMENT \'special rules\', CHANGE started started TINYINT(1) DEFAULT \'0\' NOT NULL, CHANGE starteddate starteddate DATETIME DEFAULT \'0000-00-00 00:00:00\' NOT NULL, CHANGE finished finished TINYINT(1) DEFAULT \'0\' NOT NULL, CHANGE finisheddate finisheddate DATETIME DEFAULT \'0000-00-00 00:00:00\' NOT NULL, CHANGE zzz zzz INT DEFAULT 2 NOT NULL, CHANGE checkpoints checkpoints INT DEFAULT 1 NOT NULL, CHANGE crashallowed crashallowed INT DEFAULT 2 NOT NULL, CHANGE startdirection startdirection INT DEFAULT 1 NOT NULL, CHANGE is_archived is_archived TINYINT(1) DEFAULT \'0\' NOT NULL COMMENT \'Flag if game was archived\', CHANGE U_ID U_ID INT UNSIGNED DEFAULT 0 NOT NULL, CHANGE M_ID M_ID INT DEFAULT 0 NOT NULL');
        $this->addSql('ALTER TABLE karo_maps ADD author_id INT DEFAULT 0 NOT NULL, ADD locked TINYINT(1) DEFAULT \'0\' NOT NULL COMMENT \'locked wenn bespielt\', CHANGE Name Name VARCHAR(255) DEFAULT \'\' NOT NULL COLLATE latin1_swedish_ci, CHANGE Author Author VARCHAR(255) DEFAULT \'\' NOT NULL COLLATE latin1_swedish_ci, CHANGE Night Night INT DEFAULT 0 NOT NULL, CHANGE Record Record INT DEFAULT 0 NOT NULL, CHANGE Starties Starties INT DEFAULT 0 NOT NULL, CHANGE nb_cps nb_cps INT NOT NULL COMMENT \'Number of checkpoints\', CHANGE cps_list cps_list VARCHAR(50) NOT NULL COLLATE latin1_swedish_ci COMMENT \'list of used CPs\', CHANGE cps_rec cps_rec INT NOT NULL COMMENT \'Checkpoints recommended\', CHANGE Active Active INT DEFAULT 0 NOT NULL, CHANGE rating rating DOUBLE PRECISION DEFAULT \'0\' NOT NULL COMMENT \'avg user rating\'');
        $this->addSql('ALTER TABLE karo_mapvotes DROP FOREIGN KEY FK_84544B58EA7D38C4');
        $this->addSql('ALTER TABLE karo_mapvotes DROP FOREIGN KEY FK_84544B587FD047B4');
        $this->addSql('DROP INDEX IDX_84544B58EA7D38C4 ON karo_mapvotes');
        $this->addSql('DROP INDEX IDX_84544B587FD047B4 ON karo_mapvotes');
        $this->addSql('ALTER TABLE karo_message CHANGE id id INT UNSIGNED AUTO_INCREMENT NOT NULL, CHANGE user_id user_id INT UNSIGNED NOT NULL, CHANGE contact_id contact_id INT UNSIGNED NOT NULL, CHANGE rxtx rxtx CHAR(2) DEFAULT \'tx\' NOT NULL COLLATE utf8mb4_general_ci COMMENT \'tx gesendet, rx empfangen\', CHANGE is_deleted is_deleted TINYINT(1) DEFAULT \'0\' NOT NULL');
        $this->addSql('ALTER TABLE karo_moves DROP FOREIGN KEY FK_6CDBEDFA106DA7D0');
        $this->addSql('ALTER TABLE karo_moves DROP FOREIGN KEY FK_6CDBEDFAEA7D38C4');
        $this->addSql('ALTER TABLE karo_moves DROP FOREIGN KEY FK_6CDBEDFA106DA7D0EA7D38C4');
        $this->addSql('DROP INDEX UNIQ_6CDBEDFA106DA7D0 ON karo_moves');
        $this->addSql('DROP INDEX UNIQ_6CDBEDFAEA7D38C4 ON karo_moves');
        $this->addSql('ALTER TABLE karo_moves CHANGE date date DATETIME DEFAULT \'0000-00-00 00:00:00\' NOT NULL, CHANGE x_pos x_pos SMALLINT DEFAULT 0 NOT NULL, CHANGE y_pos y_pos SMALLINT DEFAULT 0 NOT NULL, CHANGE x_vec x_vec TINYINT(1) DEFAULT \'0\' NOT NULL, CHANGE y_vec y_vec TINYINT(1) DEFAULT \'0\' NOT NULL, CHANGE crash crash TINYINT(1) DEFAULT \'0\' NOT NULL, CHANGE movemessage movemessage VARCHAR(255) DEFAULT \'\' NOT NULL COLLATE latin1_swedish_ci, CHANGE M_ID M_ID INT UNSIGNED AUTO_INCREMENT NOT NULL, CHANGE G_ID G_ID INT UNSIGNED DEFAULT 0 NOT NULL, CHANGE U_ID U_ID SMALLINT UNSIGNED DEFAULT 0 NOT NULL');
        $this->addSql('ALTER TABLE karo_teilnehmer DROP FOREIGN KEY FK_20377F83106DA7D0');
        $this->addSql('ALTER TABLE karo_teilnehmer DROP FOREIGN KEY FK_20377F83EA7D38C4');
        $this->addSql('DROP INDEX IDX_20377F83106DA7D0 ON karo_teilnehmer');
        $this->addSql('ALTER TABLE karo_teilnehmer CHANGE status status INT DEFAULT 1 NOT NULL, CHANGE moved moved TINYINT(1) DEFAULT \'0\' NOT NULL, CHANGE finished finished TINYINT(1) DEFAULT \'0\' NOT NULL, CHANGE G_ID G_ID INT DEFAULT 0 NOT NULL, CHANGE U_ID U_ID INT DEFAULT 0 NOT NULL');
        $this->addSql('ALTER TABLE karo_user DROP FOREIGN KEY FK_B0BF86304F10D637');
        $this->addSql('DROP INDEX UNIQ_B0BF86304F10D637 ON karo_user');
        $this->addSql('ALTER TABLE karo_user CHANGE U_ID U_ID INT UNSIGNED AUTO_INCREMENT NOT NULL, CHANGE Vorname Vorname VARCHAR(255) DEFAULT \'\' NOT NULL COLLATE latin1_swedish_ci, CHANGE Nachname Nachname VARCHAR(255) DEFAULT \'\' NOT NULL COLLATE latin1_swedish_ci, CHANGE Email Email VARCHAR(50) DEFAULT NULL COLLATE latin1_swedish_ci, CHANGE Homepage Homepage VARCHAR(60) DEFAULT NULL COLLATE latin1_swedish_ci, CHANGE ICQ ICQ VARCHAR(255) DEFAULT \'\' NOT NULL COLLATE latin1_swedish_ci, CHANGE AIM AIM VARCHAR(255) DEFAULT \'\' NOT NULL COLLATE latin1_swedish_ci, CHANGE MSN MSN VARCHAR(255) DEFAULT \'\' NOT NULL COLLATE latin1_swedish_ci, CHANGE Jabber Jabber VARCHAR(255) DEFAULT \'\' NOT NULL COLLATE latin1_swedish_ci, CHANGE twitter twitter VARCHAR(255) NOT NULL COLLATE latin1_swedish_ci, CHANGE xing xing VARCHAR(255) NOT NULL COLLATE latin1_swedish_ci, CHANGE linkedin linkedin VARCHAR(255) NOT NULL COLLATE latin1_swedish_ci, CHANGE facebook facebook VARCHAR(255) NOT NULL COLLATE latin1_swedish_ci, CHANGE myspace myspace VARCHAR(255) NOT NULL COLLATE latin1_swedish_ci, CHANGE Picture Picture VARCHAR(255) DEFAULT \'http://www.karopapier.de/favicon.gif\' NOT NULL COLLATE latin1_swedish_ci, CHANGE short_info short_info VARCHAR(255) NOT NULL COLLATE latin1_swedish_ci COMMENT \'short info about user\', CHANGE reallastvisit reallastvisit DATETIME NOT NULL, CHANGE currentvisit currentvisit DATETIME DEFAULT \'0000-00-00 00:00:00\' NOT NULL, CHANGE chatvisit chatvisit DATETIME DEFAULT \'0000-00-00 00:00:00\' NOT NULL, CHANGE lastmailsent lastmailsent DATETIME DEFAULT \'0000-00-00 00:00:00\' NOT NULL, CHANGE Browser Browser VARCHAR(255) DEFAULT \'\' NOT NULL COLLATE latin1_swedish_ci, CHANGE Color Color VARCHAR(6) DEFAULT \'FF0000\' NOT NULL COLLATE latin1_swedish_ci, CHANGE Size Size INT UNSIGNED DEFAULT 10 NOT NULL, CHANGE Border Border TINYINT(1) DEFAULT \'1\' NOT NULL, CHANGE View View INT UNSIGNED DEFAULT 0 NOT NULL, CHANGE draw_limit draw_limit INT NOT NULL COMMENT \'how many moves of other players should be rendered\', CHANGE GamesPerPage GamesPerPage INT UNSIGNED DEFAULT 25 NOT NULL, CHANGE games_order games_order VARCHAR(255) DEFAULT \'name\' NOT NULL COLLATE latin1_swedish_ci COMMENT \'name, blocktime, gid\', CHANGE theme theme VARCHAR(50) DEFAULT \'black\' NOT NULL COLLATE latin1_swedish_ci COMMENT \'Color/Theme Settting\', CHANGE Active Active TINYINT(1) DEFAULT \'0\' NOT NULL, CHANGE invited2 invited2 INT NOT NULL, CHANGE Sendmail Sendmail TINYINT(1) DEFAULT \'1\' NOT NULL, CHANGE Tag Tag TINYINT(1) DEFAULT \'1\' NOT NULL, CHANGE Nacht Nacht TINYINT(1) DEFAULT \'1\' NOT NULL, CHANGE Maxgames Maxgames INT DEFAULT 0 NOT NULL, CHANGE Signupdate Signupdate DATETIME DEFAULT \'0000-00-00 00:00:00\' NOT NULL, CHANGE Session Session VARCHAR(255) DEFAULT \'\' NOT NULL COLLATE latin1_swedish_ci, CHANGE Warned Warned TINYINT(1) DEFAULT \'0\' NOT NULL, CHANGE automoves automoves INT UNSIGNED DEFAULT 0 NOT NULL, CHANGE maillock maillock DATETIME DEFAULT \'0000-00-00 00:00:00\' NOT NULL, CHANGE isbot isbot INT DEFAULT 0 NOT NULL, CHANGE Birthday Birthday DATE DEFAULT \'0000-00-00\' NOT NULL, CHANGE gelesen gelesen INT DEFAULT 0 NOT NULL, CHANGE faulpelz faulpelz INT UNSIGNED DEFAULT 0 NOT NULL, CHANGE move_autoforward move_autoforward SMALLINT DEFAULT 0 NOT NULL, CHANGE economode economode TINYINT(1) DEFAULT \'1\' NOT NULL COMMENT \'0 or 1 for economode\', CHANGE geoLat geoLat VARCHAR(30) DEFAULT NULL COLLATE latin1_swedish_ci COMMENT \'Latitude\', CHANGE geoLng geoLng VARCHAR(30) DEFAULT NULL COLLATE latin1_swedish_ci COMMENT \'Longitude\', CHANGE activeJS activeJS TINYINT(1) DEFAULT \'0\' NOT NULL COMMENT \'Flag if JavaScript is enabled\', CHANGE activeCanvas activeCanvas TINYINT(1) DEFAULT \'0\' NOT NULL, CHANGE status_code status_code TINYINT(1) DEFAULT \'0\' NOT NULL, CHANGE status_text status_text VARCHAR(255) DEFAULT \'\' NOT NULL COLLATE latin1_swedish_ci, CHANGE status_date status_date DATE DEFAULT NULL COMMENT \'validity date of status\', CHANGE nb_dran nb_dran INT DEFAULT 0 COMMENT \'count of dran\', CHANGE nb_games nb_games INT DEFAULT 0 COMMENT \'count of active games\', CHANGE max_wollust max_wollust INT UNSIGNED DEFAULT 0 NOT NULL COMMENT \'max wollust value\', CHANGE use_bart use_bart TINYINT(1) DEFAULT \'0\' COMMENT \'Bart in Karo1 benutzen?\', CHANGE use_sound use_sound TINYINT(1) DEFAULT \'1\' NOT NULL COMMENT \'use notification sound\', CHANGE notification_sound notification_sound VARCHAR(50) DEFAULT \'brumm\' NOT NULL COLLATE latin1_swedish_ci COMMENT \'sound used for notification\', CHANGE distance distance INT UNSIGNED DEFAULT 0 NOT NULL, CHANGE Invited Invited INT UNSIGNED DEFAULT 0 NOT NULL');
        $this->addSql('ALTER TABLE karo_user_map DROP FOREIGN KEY FK_63692D29F675F31B');
        $this->addSql('DROP INDEX IDX_63692D29F675F31B ON karo_user_map');
        $this->addSql('ALTER TABLE karo_user_map CHANGE author_id author_id INT NOT NULL, CHANGE Starties starties INT UNSIGNED NOT NULL, CHANGE rating rating DOUBLE PRECISION NOT NULL');
        $this->addSql('ALTER TABLE karo_visits DROP FOREIGN KEY FK_D1DE978DEA7D38C4');
        $this->addSql('DROP INDEX IDX_D1DE978DEA7D38C4 ON karo_visits');
        $this->addSql('ALTER TABLE karo_visits DROP PRIMARY KEY');
        $this->addSql('ALTER TABLE karo_visits CHANGE visitdate visitdate DATE DEFAULT \'0000-00-00\' NOT NULL, CHANGE U_ID U_ID INT DEFAULT 0 NOT NULL');
        $this->addSql('ALTER TABLE karo_visits ADD PRIMARY KEY (U_ID, visitdate)');
    }
}
